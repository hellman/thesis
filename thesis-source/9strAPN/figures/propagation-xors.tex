{
\begin{figure}
    \begin{subfigure}[t]{0.21\textwidth}
        \centering
        \begin{tikzpicture}[xscale=0.7, yscale=-0.45]
            \draw [->] (0,0) -- (0,0.5);
            \draw (0,0.7) ellipse (0.116666666667 and 0.2);
            \draw (0,0.5) -- (0,0.9);
            \draw (-0.116667,0.7) -- (0.116667,0.7);
            \draw (-0.116667,0.7) node[anchor=east] {$a_l$};
            \draw [->] (2,0) -- (2,0.5);
            \draw (2,0.7) ellipse (0.116666666667 and 0.2);
            \draw (2,0.5) -- (2,0.9);
            \draw (1.883333,0.7) -- (2.116667,0.7);
            \draw (1.883333,0.7) node[anchor=west] {~$a_r$};
            \draw [->] (0,0.9) -- (0,1.4);
            \draw [->] (2,0.9) -- (2,1.4);
            \draw (-0.5,1.4) rectangle (2.5,2.4) node[pos=0.5] {$L$};
            \draw [->] (0,2.4) -- (0,2.9);
            \draw (0,3.1) ellipse (0.116666666667 and 0.2);
            \draw (0,2.9) -- (0,3.3);
            \draw (-0.116667,3.1) -- (0.116667,3.1);
            \draw (-0.116667,3.1) node[anchor=east] {$b_l$};
            \draw [->] (2,2.4) -- (2,2.9);
            \draw (2,3.1) ellipse (0.116666666667 and 0.2);
            \draw (2,2.9) -- (2,3.3);
            \draw (1.883333,3.1) -- (2.116667,3.1);
            \draw (1.883333,3.1) node[anchor=west] {~$b_r$};
            \draw [->] (0,3.3) -- (0,3.8);
            \draw [->] (2,3.3) -- (2,3.8);
        \end{tikzpicture}
        \FigDef{propagation-xors-a}{}
    \end{subfigure}
    \hspace{0.2cm}
    \begin{subfigure}[t]{0.21\textwidth}
        \centering
        \begin{tikzpicture}[xscale=0.7, yscale=-0.45]
            \draw [->] (2,0) -- (2,0.5);
            \draw (2,0.7) ellipse (0.116666666667 and 0.2);
            \draw (2,0.5) -- (2,0.9);
            \draw (1.883333,0.7) -- (2.116667,0.7);
            \draw (2.116667,0.7) node[anchor=west] {$a$};
            \draw [->] (0,0) -- (0,1.4);
            \draw [->] (2,0.9) -- (2,1.4);
            \draw (-0.5,1.4) rectangle (2.5,2.4) node[pos=0.5] {$L$};
            \draw [->] (2,2.4) -- (2,2.9);
            \draw (2,3.1) ellipse (0.116666666667 and 0.2);
            \draw (2,2.9) -- (2,3.3);
            \draw (1.883333,3.1) -- (2.116667,3.1);
            \draw (2.116667,3.1) node[anchor=west] {$b$};
            \draw [->] (0,2.4) -- (0,3.8);
            \draw [->] (2,3.3) -- (2,3.8);
        \end{tikzpicture}
        \FigDef{propagation-xors-b}{}
    \end{subfigure}
    \hspace{0.2cm}
    \begin{subfigure}[t]{0.21\textwidth}
        \centering
        \begin{tikzpicture}[xscale=0.7, yscale=-0.45]
            \draw [->] (2,0) -- (2,0.5);
            \draw (2,0.7) ellipse (0.116666666667 and 0.2);
            \draw (2,0.5) -- (2,0.9);
            \draw (1.883333,0.7) -- (2.116667,0.7);
            \draw (2.116667,0.7) node[anchor=west] {$b$};
            \draw [->] (0,0) -- (0,1.4);
            \draw (0,1.6) ellipse (0.116666666667 and 0.2);
            \draw (0,1.4) -- (0,1.8);
            \draw (-0.116667,1.6) -- (0.116667,1.6);
            \draw (2,0.9) -- (2,1.6);
            \draw [->] (2,1.6) -- (1.3,1.6);
            \draw (0.7,1.1) rectangle (1.3,2.1) node[pos=0.5] {$\mathcal{I}$};
            \draw [->] (0.7,1.6) -- (0.116667,1.6);
            \draw [->] (0,1.8) -- (0,2.3);
            \draw [->] (2,1.6) -- (2,2.3);
        \end{tikzpicture}
        \FigDef{propagation-xors-c}{}
    \end{subfigure}
    \hspace{0.2cm}
    \begin{subfigure}[t]{0.25\textwidth}
        \centering
        \begin{tikzpicture}[xscale=0.7, yscale=-0.45]
            \draw [->] (0,0) -- (0,0.5);
            \draw (0,0.7) ellipse (0.116666666667 and 0.2);
            \draw (0,0.5) -- (0,0.9);
            \draw (-0.116667,0.7) -- (0.116667,0.7);
            \draw (2,0) -- (2,0.7);
            \draw [->] (2,0.7) -- (1.3,0.7);
            \draw (0.7,0.2) rectangle (1.3,1.2) node[pos=0.5] {$\mathcal{I}$};
            \draw [->] (0.7,0.7) -- (0.116667,0.7);
            \draw [->] (0,0.9) -- (0,1.9);
            \draw (0,2.1) ellipse (0.116666666667 and 0.2);
            \draw (0,1.9) -- (0,2.3);
            \draw (-0.116667,2.1) -- (0.116667,2.1);
            \draw (2,0.7) -- (2,2.1);
            \draw [->] (2,2.1) -- (1.3,2.1);
            \draw (0.7,1.6) rectangle (1.3,2.6) node[pos=0.5] {$i_{b}$};
            \draw [->] (0.7,2.1) -- (0.116667,2.1);
            \draw [->] (2,2.1) -- (2,2.8);
            \draw (2,3) ellipse (0.116666666667 and 0.2);
            \draw (2,2.8) -- (2,3.2);
            \draw (1.883333,3) -- (2.116667,3);
            \draw (2.116667,3) node[anchor=west] {$b$};
            \draw [dashed] (-0.75,1.35) rectangle (2.75,3.45);
            \draw [->] (0,2.3) -- (0,3.7);
            \draw [->] (2,3.2) -- (2,3.7);
        \end{tikzpicture}
        \FigDef{propagation-xors-d}{}
    \end{subfigure}
    \FigDef{propagation-xors}{Propagating the constant \txor{} from the central layer to the outside affine layers.}
\end{figure}
}
